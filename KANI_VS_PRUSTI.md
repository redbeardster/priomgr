# Kani vs Prusti: –î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

## üé≠ –î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏

```
        PRUSTI                          KANI
    (–î–µ–¥—É–∫—Ç–∏–≤–Ω—ã–π)                (Model Checking)
         ‚îÇ                              ‚îÇ
         ‚ñº                              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã‚îÇ                    ‚îÇ Proofs  ‚îÇ
    ‚îÇrequires ‚îÇ                    ‚îÇkani::any‚îÇ
    ‚îÇ ensures ‚îÇ                    ‚îÇ  assume ‚îÇ
    ‚îÇ  pure   ‚îÇ                    ‚îÇ assert  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                              ‚îÇ
         ‚ñº                              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  Viper  ‚îÇ                    ‚îÇ  CBMC   ‚îÇ
    ‚îÇ   SMT   ‚îÇ                    ‚îÇ   SAT   ‚îÇ
    ‚îÇ   Z3    ‚îÇ                    ‚îÇ Solver  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                              ‚îÇ
         ‚ñº                              ‚ñº
    –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ                 –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö
    –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏                   –ø—É—Ç–µ–π (bounded)
```

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Prusti üü£ | Kani üü¢ |
|----------|-----------|---------|
| **–ü–æ–¥—Ö–æ–¥** | Deductive verification | Bounded model checking |
| **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è** | Viper + Z3 | CBMC + MiniSat |
| **–ü–æ–ª–Ω–æ—Ç–∞** | ‚úÖ –ü–æ–ª–Ω–∞—è (–¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤) | ‚ö†Ô∏è Bounded (–¥–æ –≥–ª—É–±–∏–Ω—ã N) |
| **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π | ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è |
| **–°–∫–æ—Ä–æ—Å—Ç—å** | ‚ö° –ë—ã—Å—Ç—Ä–æ (~5s) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ (~15s) |
| **–¶–∏–∫–ª—ã** | ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã | ‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç unwind |
| **–†–µ–∫—É—Ä—Å–∏—è** | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ |
| **Async** | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | ‚ùå –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| **Unsafe** | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è | ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è |
| **–í—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | ‚úÖ –í—ã—Å–æ–∫–∞—è (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è (assert) |
| **–ó—Ä–µ–ª–æ—Å—Ç—å** | ‚ö†Ô∏è –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è | ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è (AWS) |
| **–°–æ–æ–±—â–µ—Å—Ç–≤–æ** | üéì –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–æ–µ | üè¢ –ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω–æ–µ |

---

## üî¨ –ü—Ä–∏–º–µ—Ä: –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏—è

### –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

```rust
pub fn apply_priority_adjustment(old_priority: i32, step: i32) -> i32 {
    (old_priority - step).max(MIN_PRIORITY)
}
```

---

### Prusti –ø–æ–¥—Ö–æ–¥

```rust
#[requires(MIN_PRIORITY <= old_priority && old_priority <= MAX_PRIORITY)]
#[requires(step > 0)]
#[ensures(MIN_PRIORITY <= result && result <= MAX_PRIORITY)]
#[ensures(result <= old_priority)]
pub fn apply_priority_adjustment(old_priority: i32, step: i32) -> i32 {
    (old_priority - step).max(MIN_PRIORITY)
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç Prusti:**

1. **–ß–∏—Ç–∞–µ—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã** - –ø–æ–Ω–∏–º–∞–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
2. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —É—Å–ª–æ–≤–∏—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏** (VCs)
3. **–ü–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ Viper** - –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —è–∑—ã–∫
4. **–ü–µ—Ä–µ–¥–∞—ë—Ç –≤ Z3** - SMT solver
5. **–î–æ–∫–∞–∑—ã–≤–∞–µ—Ç** –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
–ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã ‚Üí Viper IR ‚Üí Z3 SMT ‚Üí –î–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úì Precondition holds
‚úì Postcondition holds
‚úì Function verified
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –î–ª—è **–≤—Å–µ—Ö** –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤ (—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏—Ö requires)
- ‚úÖ **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ**
- ‚úÖ –ù–µ bounded

---

### Kani –ø–æ–¥—Ö–æ–¥

```rust
#[kani::proof]
fn verify_adjustment_decreases() {
    let old_priority: i32 = kani::any();
    let step: i32 = kani::any();

    kani::assume(MIN_PRIORITY <= old_priority && old_priority <= MAX_PRIORITY);
    kani::assume(step > 0 && step <= 100);

    let result = apply_priority_adjustment(old_priority, step);

    assert!(result <= old_priority);
    assert!(result >= MIN_PRIORITY);
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç Kani:**

1. **–°–æ–∑–¥–∞—ë—Ç —Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** - `kani::any()`
2. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - `kani::assume()`
3. **–°–∏–º–≤–æ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç** —Ñ—É–Ω–∫—Ü–∏—é
4. **–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SAT —Ñ–æ—Ä–º—É–ª—É** –¥–ª—è –≤—Å–µ—Ö –ø—É—Ç–µ–π
5. **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç** —á–µ—Ä–µ–∑ CBMC

**–ü—Ä–æ—Ü–µ—Å—Å:**
```
Rust ‚Üí MIR ‚Üí CBMC IR ‚Üí SAT —Ñ–æ—Ä–º—É–ª–∞ ‚Üí MiniSat ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
VERIFICATION:- SUCCESSFUL
 - verify_adjustment_decreases: SUCCESS
```

**–ì–∞—Ä–∞–Ω—Ç–∏–∏:**
- ‚úÖ –î–ª—è **–≤—Å–µ—Ö** –ø—É—Ç–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚úÖ –í –ø—Ä–µ–¥–µ–ª–∞—Ö **bounded** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚ö†Ô∏è –ù–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –∞ exhaustive testing

---

## üéØ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

### Prusti —Å–∏–ª—å–Ω–µ–µ –≤:

#### 1. –í—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
```rust
// –°–ª–æ–∂–Ω—ã–µ –∏–º–ø–ª–∏–∫–∞—Ü–∏–∏
#[ensures(x > 0 ==> result > 0)]
#[ensures(x == 0 ==> result == 0)]
#[ensures(x < 0 ==> result < 0)]
pub fn sign_preserving(x: i32) -> i32 { ... }

// –ö–≤–∞–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã
#[ensures(forall(|i: usize| i < result.len() ==> result[i] >= 0))]
pub fn all_positive(v: Vec<i32>) -> Vec<i32> { ... }
```

#### 2. –ö–æ–º–ø–æ–∑–∏—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π
```rust
#[pure]
fn is_valid(x: i32) -> bool { x >= 0 }

#[requires(is_valid(x))]  // ‚Üê –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pure —Ñ—É–Ω–∫—Ü–∏–∏
#[ensures(is_valid(result))]
pub fn process(x: i32) -> i32 { ... }
```

#### 3. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
```rust
struct BoundedValue {
    value: i32,
}

impl BoundedValue {
    #[ensures(MIN <= result.value && result.value <= MAX)]
    pub fn new(v: i32) -> Self {
        Self { value: v.clamp(MIN, MAX) }
    }
    
    // –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç: value –≤—Å–µ–≥–¥–∞ –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö
}
```

---

### Kani —Å–∏–ª—å–Ω–µ–µ –≤:

#### 1. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
```rust
// –ù–µ –Ω—É–∂–Ω—ã –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏
pub fn my_function(x: i32) -> i32 {
    x.clamp(0, 100)
}

// –ü—Ä–æ—Å—Ç–æ –ø–∏—à–µ–º proof
#[kani::proof]
fn verify_my_function() {
    let x: i32 = kani::any();
    let result = my_function(x);
    assert!(result >= 0 && result <= 100);
}
```

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
```rust
#[kani::proof]
fn verify_no_overflow() {
    let x: i32 = kani::any();
    let y: i32 = kani::any();
    
    kani::assume(x > 0 && y > 0);
    kani::assume(x <= i32::MAX / 2);
    kani::assume(y <= i32::MAX / 2);
    
    let result = x + y;  // –ü—Ä–æ–≤–µ—Ä–∏—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
    assert!(result > 0);
}
```

#### 3. –ü–æ–∏—Å–∫–µ –±–∞–≥–æ–≤
```rust
#[kani::proof]
fn find_bug() {
    let x: i32 = kani::any();
    
    // Kani –Ω–∞–π–¥—ë—Ç, —á—Ç–æ –ø—Ä–∏ x = i32::MIN —ç—Ç–æ —É–ø–∞–¥—ë—Ç
    let result = x.abs();
    assert!(result >= 0);  // ‚ùå FAIL: i32::MIN.abs() = i32::MIN
}
```

---

## üîÑ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Prusti –µ—Å–ª–∏:

‚úÖ –ù—É–∂–Ω—ã **—Å—Ç—Ä–æ–≥–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≥–∞—Ä–∞–Ω—Ç–∏–∏**
```rust
// –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å —á—ë—Ç–∫–∏–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
#[requires(balance >= amount)]
#[ensures(result.balance == old(balance) - amount)]
pub fn withdraw(balance: u64, amount: u64) -> Account
```

‚úÖ –§—É–Ω–∫—Ü–∏—è –∏–º–µ–µ—Ç **—á—ë—Ç–∫—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é**
```rust
#[requires(n >= 0)]
#[ensures(result == n * (n + 1) / 2)]
pub fn sum_to_n(n: i32) -> i32
```

‚úÖ –ù—É–∂–Ω–∞ **–∫–æ–º–ø–æ–∑–∏—Ü–∏—è** —Ñ—É–Ω–∫—Ü–∏–π
```rust
#[pure]
fn is_sorted(v: &[i32]) -> bool { ... }

#[requires(is_sorted(input))]
#[ensures(is_sorted(result))]
pub fn merge(input: &[i32]) -> Vec<i32>
```

---

### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Kani –µ—Å–ª–∏:

‚úÖ –ù—É–∂–Ω–∞ **–±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞** –±–µ–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π
```rust
// –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—Å–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é
pub fn calculate(x: i32, y: i32) -> i32 {
    (x + y).clamp(0, 100)
}

// –ë—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏–ª–∏
#[kani::proof]
fn verify() {
    let x: i32 = kani::any();
    let y: i32 = kani::any();
    let r = calculate(x, y);
    assert!(r >= 0 && r <= 100);
}
```

‚úÖ –ò—â–µ—Ç–µ **–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏**
```rust
#[kani::proof]
fn find_edge_cases() {
    let x: u8 = kani::any();
    let y: u8 = kani::any();
    
    // Kani –Ω–∞–π–¥—ë—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ
    let result = x + y;
    assert!(result >= x);  // –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏
}
```

‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ **–∞–ª–≥–æ—Ä–∏—Ç–º** —Å —Ü–∏–∫–ª–∞–º–∏
```rust
#[kani::proof]
#[kani::unwind(10)]
fn verify_algorithm() {
    let mut x: i32 = kani::any();
    kani::assume(x >= 0 && x <= 100);
    
    while x > 0 {
        x = x / 2;
    }
    
    assert!(x == 0);
}
```

---

## üí° –õ—É—á—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–∞!

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

```rust
// 1. Prusti –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è + –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)
#[requires(MIN_PRIORITY <= old_priority && old_priority <= MAX_PRIORITY)]
#[requires(step > 0)]
#[ensures(MIN_PRIORITY <= result && result <= MAX_PRIORITY)]
#[ensures(result <= old_priority)]
pub fn apply_priority_adjustment(old_priority: i32, step: i32) -> i32 {
    (old_priority - step).max(MIN_PRIORITY)
}

// 2. Kani –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
#[kani::proof]
fn verify_adjustment_edge_cases() {
    let old_priority: i32 = kani::any();
    let step: i32 = kani::any();
    
    kani::assume(MIN_PRIORITY <= old_priority && old_priority <= MAX_PRIORITY);
    kani::assume(step > 0 && step <= 100);
    
    let result = apply_priority_adjustment(old_priority, step);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
    assert!(result <= old_priority);
    assert!(result >= MIN_PRIORITY);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
    if old_priority == MIN_PRIORITY {
        assert!(result == MIN_PRIORITY);
    }
    
    if step >= old_priority - MIN_PRIORITY {
        assert!(result == MIN_PRIORITY);
    }
}
```

---

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (Priority Manager)

```
–§—É–Ω–∫—Ü–∏—è: calculate_optimal_priority_verified

Prusti:  ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ~2s
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë  ~8s

–§—É–Ω–∫—Ü–∏—è: apply_priority_adjustment

Prusti:  ‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ~1s
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ~2s

–§—É–Ω–∫—Ü–∏—è: verify_finite_adjustments (—Å —Ü–∏–∫–ª–æ–º)

Prusti:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  ~4s (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç)
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  ~10s (—Å unwind=10)
```

### –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

```
–†–∞–∑–º–µ—Ä —Ñ—É–Ω–∫—Ü–∏–∏ (LOC)

Prusti:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  –•–æ—Ä–æ—à–æ –¥–æ 100 LOC
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  –•–æ—Ä–æ—à–æ –¥–æ 50 LOC

–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É—Ç–µ–π

Prusti:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  –ù–µ –∑–∞–≤–∏—Å–∏—Ç (SMT)
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç

–ì–ª—É–±–∏–Ω–∞ —Ü–∏–∫–ª–æ–≤

Prusti:  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  –õ—é–±–∞—è (—Å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏)
Kani:    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ unwind
```

---

## üéì –ö—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è

```
–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Å–≤–æ–µ–Ω–∏—è

Kani:    ‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ  (–ø—Ä–æ—Å—Ç–æ)
         - –ó–Ω–∞—Ç—å Rust
         - –ü–æ–Ω–∏–º–∞—Ç—å assert
         - –ó–Ω–∞—Ç—å kani::any/assume

Prusti:  ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ  (—Å–ª–æ–∂–Ω–æ)
         - –ó–Ω–∞—Ç—å Rust
         - –ü–æ–Ω–∏–º–∞—Ç—å Hoare logic
         - –ü–∏—Å–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã
         - –ü–æ–Ω–∏–º–∞—Ç—å –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã
         - –ó–Ω–∞—Ç—å SMT
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Priority Manager

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ Prusti

```rust
// ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —á—ë—Ç–∫–∏–º–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
#[requires(...)]
#[ensures(...)]
pub fn calculate_optimal_priority_verified(...) -> i32

// ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å —è—Å–Ω–æ–π —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
#[requires(...)]
#[ensures(...)]
pub fn apply_priority_adjustment(...) -> i32

// ‚úÖ Pure —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö
#[pure]
pub fn needs_adjustment(...) -> bool
```

### –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —á–µ—Ä–µ–∑ Kani

```rust
// ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
#[kani::proof]
fn verify_priority_bounds() { ... }

// ‚úÖ –ú–æ–Ω–æ—Ç–æ–Ω–Ω–æ—Å—Ç—å –ø—Ä–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–∫–∞—Ö
#[kani::proof]
fn verify_monotonic_decrease_under_load() { ... }

// ‚úÖ –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Å —Ü–∏–∫–ª–∞–º–∏
#[kani::proof]
#[kani::unwind(10)]
fn verify_finite_adjustments() { ... }

// ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
#[kani::proof]
fn verify_clamp_bounds() { ... }
```

---

## üìö –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

### –ò–¥–µ–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è

```
1. Prusti –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   ‚Üì
   –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é
   –î–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
   
2. Kani –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
   ‚Üì
   –ù–∞—Ö–æ–¥–∏—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –ø—É—Ç–∏
   
3. Unit —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–∏
   ‚Üì
   –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
   CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
```

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```
–ù–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
    ‚Üì
–î–æ–±–∞–≤–∏—Ç—å Prusti –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
    ‚Üì
–ó–∞–ø—É—Å—Ç–∏—Ç—å cargo prusti (–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ)
    ‚Üì
–ù–∞–ø–∏—Å–∞—Ç—å Kani proofs (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤)
    ‚Üì
–ó–∞–ø—É—Å—Ç–∏—Ç—å cargo kani (exhaustive testing)
    ‚Üì
–î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã (–ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
    ‚Üì
–ì–æ—Ç–æ–≤–æ! üéâ
```

---

**–í—ã–≤–æ–¥:** Prusti –∏ Kani **–¥–æ–ø–æ–ª–Ω—è—é—Ç** –¥—Ä—É–≥ –¥—Ä—É–≥–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏! üöÄ
